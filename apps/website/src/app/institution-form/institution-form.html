<div class="min-h-screen bg-gray-50">
  <!-- Top Navigation -->
  <header class="bg-white border-b border-gray-200 px-4 md:px-10 lg:px-20 py-4">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-2 font-semibold text-lg">
        <div class="w-8 h-8 bg-primary rounded flex items-center justify-center">
          <ng-icon name="lucideBuilding2" size="18" class="text-white" />
        </div>
        <span>EduReg</span>
      </div>

      <div class="flex items-center gap-4">
        <span class="text-sm text-muted-foreground">
          Need help? <a href="#" class="text-primary hover:underline">Support Center</a>
        </span>
        <button
          hlmBtn
          variant="outline"
          (click)="saveAndExit()"
          class="text-sm">
          Save & Exit
        </button>
      </div>
    </div>
  </header>

  <div class="flex gap-0 max-w-7xl mx-auto">
    <!-- Sidebar Stepper -->
    <aside class="w-80 bg-white border-r border-gray-200 min-h-[calc(100vh-73px)] p-8">
      <nav class="space-y-2">
        @for (step of steps(); track step.id; let i = $index) {
          <div
            class="flex items-start gap-4 p-4 rounded-lg transition-colors cursor-pointer"
            [ngClass]="{'bg-primary/10': currentStep() === i + 1}"
            [class.hover:bg-gray-50]="currentStep() !== i + 1">

            <!-- Icon/Check -->
            <div
              class="w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors"
              [class.bg-green-100]="step.completed"
              [class.text-green-600]="step.completed"
              [class.bg-primary]="currentStep() === i + 1 && !step.completed"
              [class.text-white]="currentStep() === i + 1 && !step.completed"
              [class.bg-gray-100]="currentStep() !== i + 1 && !step.completed"
              [class.text-gray-400]="currentStep() !== i + 1 && !step.completed">
              @if (step.completed) {
                <ng-icon name="lucideCheck" size="20" />
              } @else {
                <ng-icon [name]="step.icon" size="20" />
              }
            </div>

            <!-- Text -->
            <div class="flex-1 min-w-0">
              <h3
                class="font-semibold text-sm mb-0.5"
                [class.text-primary]="currentStep() === i + 1"
                [class.text-foreground]="currentStep() !== i + 1">
                {{ step.title }}
              </h3>
              <p class="text-xs text-muted-foreground">{{ step.subtitle }}</p>
            </div>
          </div>
        }
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-8 md:p-12">
      <div class="max-w-3xl">
        <!-- Page Header -->
        <div class="mb-8">
          <h1 class="text-3xl font-bold mb-2">Institution Details</h1>
          <p class="text-muted-foreground">
            Step {{ currentStep() }} of {{ steps().length }}: Please provide the legal identification and location of
            your entity.
          </p>
        </div>

        <!-- Form -->
        <form [formGroup]="institutionForm" class="space-y-8">

          <!-- IDENTIFICATION Section -->
          <section class="space-y-6">
            <div class="flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-muted-foreground">
              <ng-icon name="lucideFingerprint" size="18" />
              <span>IDENTIFICATION</span>
            </div>

            <!-- Institution Legal Name -->
            <div class="space-y-2">
              <label hlmLabel for="legalName">Institution Legal Name</label>
              <input
                hlmInput
                id="legalName"
                formControlName="legalName"
                placeholder="e.g. Metropolitan University of Technology"
                class="w-full" />
            </div>

            <!-- Institution Type & Accreditation Number -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="space-y-2">
                <label hlmLabel for="institutionType">Institution Type</label>
                <brn-select
                  id="institutionType"
                  placeholder="Select type"
                  formControlName="institutionType">
                  <hlm-select-trigger class="w-full">
                    <hlm-select-value />
                  </hlm-select-trigger>
                  <hlm-select-content>
                    @for (type of institutionTypes(); track type) {
                      <hlm-option [value]="$any(type)">
                        {{ type }}
                      </hlm-option>
                    }
                  </hlm-select-content>
                </brn-select>
              </div>

              <div class="space-y-2">
                <label hlmLabel for="accreditationNumber">Accreditation Number</label>
                <input
                  hlmInput
                  id="accreditationNumber"
                  formControlName="accreditationNumber"
                  placeholder="REG-000000"
                  class="w-full" />
                <p class="text-xs text-muted-foreground flex items-center gap-1">
                  <ng-icon name="lucideFingerprint" size="12" />
                  Found on your Ministry of Education certificate
                </p>
              </div>
            </div>
          </section>

          <!-- LOCATION Section -->
          <section class="space-y-6">
            <div class="flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-muted-foreground">
              <ng-icon name="lucideMapPin" size="18" />
              <span>LOCATION</span>
            </div>

            <!-- Street Address -->
            <div class="space-y-2">
              <label hlmLabel for="streetAddress">Street Address</label>
              <input
                hlmInput
                id="streetAddress"
                formControlName="streetAddress"
                placeholder="123 Education Plaza"
                class="w-full" />
            </div>

            <!-- City, State, ZIP -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="space-y-2">
                <label hlmLabel for="city">City</label>
                <input
                  hlmInput
                  id="city"
                  formControlName="city"
                  class="w-full" />
              </div>

              <div class="space-y-2">
                <label hlmLabel for="stateProvince">State / Province</label>
                <input
                  hlmInput
                  id="stateProvince"
                  formControlName="stateProvince"
                  class="w-full" />
              </div>

              <div class="space-y-2">
                <label hlmLabel for="zipPostalCode">ZIP / Postal Code</label>
                <input
                  hlmInput
                  id="zipPostalCode"
                  formControlName="zipPostalCode"
                  class="w-full" />
              </div>
            </div>
          </section>

          <!-- ONLINE PRESENCE Section -->
          <section class="space-y-6">
            <div class="flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-muted-foreground">
              <ng-icon name="lucideGlobe" size="18" />
              <span>ONLINE PRESENCE</span>
            </div>

            <!-- Official Website -->
            <div class="space-y-2">
              <label hlmLabel for="officialWebsite">Official Website</label>
              <div class="relative">
                <span class="absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm">
                  https://
                </span>
                <input
                  hlmInput
                  id="officialWebsite"
                  formControlName="officialWebsite"
                  placeholder="www.university.edu"
                  class="w-full pl-16" />
              </div>
            </div>
          </section>

          <!-- Form Actions -->
          <div class="flex items-center justify-between pt-8 border-t border-gray-200">
            <button
              hlmBtn
              variant="ghost"
              type="button"
              (click)="previousStep()"
              [disabled]="currentStep() === 1"
              class="flex items-center gap-2">
              <ng-icon name="lucideChevronLeft" size="18" />
              Back to Profile Info
            </button>

            <button
              hlmBtn
              type="button"
              (click)="saveAndContinue()"
              [disabled]="!isStepValid()"
              class="flex items-center gap-2">
              Save & Continue
              <ng-icon name="lucideChevronRight" size="18" />
            </button>
          </div>
        </form>
      </div>
    </main>
  </div>

  <!-- Footer -->
  <footer class="border-t border-gray-200 bg-white px-4 md:px-10 lg:px-20 py-6">
    <p class="text-center text-xs text-muted-foreground">
      Â© 2024 EduReg Global. All rights reserved. Your data is protected by end-to-end encryption.
    </p>
  </footer>
</div>
