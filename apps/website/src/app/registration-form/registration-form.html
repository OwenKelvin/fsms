<div class="min-h-screen bg-gray-50">
  <!-- Top Navigation -->
  <header class="bg-white border-b border-gray-200 px-4 md:px-10 lg:px-20 py-4">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-2 font-semibold text-lg">
        <div class="w-8 h-8 bg-primary rounded flex items-center justify-center">
          <ng-icon name="lucideBuilding2" size="18" class="text-white" />
        </div>
        <span>EduReg</span>
      </div>

      <div class="flex items-center gap-4">
        <span class="text-sm text-muted-foreground">
          Need help? <a href="#" class="text-primary hover:underline">Support Center</a>
        </span>
        <button
          hlmBtn
          variant="outline"
          (click)="saveAndExit()"
          class="text-sm">
          Save & Exit
        </button>
      </div>
    </div>
  </header>

  <div class="flex gap-0 max-w-7xl mx-auto">
    <!-- Sidebar Stepper -->
    <aside class="w-80 bg-white border-r border-gray-200 min-h-[calc(100vh-73px)] p-8">
      <nav class="space-y-2">
        @for (step of steps(); track step.id; let i = $index) {
          <div
            class="flex items-start gap-4 p-4 rounded-lg transition-colors cursor-pointer"
            [class.bg-primary/10]="currentStep() === i"
            [class.hover:bg-gray-50]="currentStep() !== i"
            (click)="currentStep.set(i)">

            <!-- Icon/Check -->
          <div
            class="w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors"
            [class.bg-green-100]="step.completed"
            [class.text-green-600]="step.completed"
            [class.bg-primary]="currentStep() === i && !step.completed"
            [class.text-white]="currentStep() === i && !step.completed"
            [class.bg-gray-100]="currentStep() !== i && !step.completed"
            [class.text-gray-400]="currentStep() !== i && !step.completed">
            @if (step.completed) {
              <ng-icon name="lucideCheck" size="20" />
            } @else {
              <ng-icon [name]="step.icon" size="20" />
            }
          </div>

          <!-- Text -->
          <div class="flex-1 min-w-0">
            <h3
              class="font-semibold text-sm mb-0.5"
              [class.text-primary]="currentStep() === i"
              [class.text-foreground]="currentStep() !== i">
              {{ step.title }}
            </h3>
            <p class="text-xs text-muted-foreground">{{ step.subtitle }}</p>
          </div>
          </div>
        }
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-8 md:p-12">
      <div class="max-w-3xl">
        @switch (currentStep()) {
          @case (0) {
            <app-profile-info-step
              [form]="registrationForm"
              [isValid]="currentStepValid()"
              (next)="saveAndContinue()" />
          }
          @case (1) {
            <app-institution-details-step
              [form]="registrationForm"
              [isValid]="currentStepValid()"
              (next)="saveAndContinue()"
              (back)="previousStep()" />
          }
          @case (2) {
            <app-documents-step
              [form]="registrationForm"
              [isValid]="currentStepValid()"
              (next)="saveAndContinue()"
              (back)="previousStep()" />
          }
          @case (3) {
            <app-admin-credentials-step
              [form]="registrationForm"
              [isValid]="currentStepValid()"
              (submit)="submitRegistration()"
              (back)="previousStep()" />
          }
        }
      </div>
    </main>
  </div>

  <!-- Footer -->
  <footer class="border-t border-gray-200 bg-white px-4 md:px-10 lg:px-20 py-6">
    <div class="flex items-center justify-between text-xs text-muted-foreground max-w-7xl mx-auto">
      <p>
        Â© 2024 EduReg Global. All rights reserved.
        @if (currentStep() === 3) {
          All administrative actions are logged for security purposes. Data encryption is active.
        } @else {
          Your data is protected by end-to-end encryption.
        }
      </p>
      @if (currentStep() === 2) {
        <div class="flex items-center gap-2 text-green-600">
          <ng-icon name="lucideShieldCheck" size="14" />
          <span class="font-medium">SSL SECURE CONNECTION</span>
        </div>
      }
    </div>
  </footer>
</div>
